<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>S√ºrpriz G√ºl ‚Äî Sadece ƒ∞pek i√ßin</title>
  <style>
    :root{--bg:#071022;--card:#08121a;--accent:#ef476f;--muted:#aab3c2}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#04101a);color:#fff}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:26px;border-radius:16px;box-shadow:0 10px 40px rgba(2,6,23,0.7);text-align:center;max-width:820px;width:100%}
    h1{margin:0 0 6px;font-size:1.4rem}

    .stage{min-height:260px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px;position:relative}

    .btn{background:linear-gradient(90deg,#ff8fb0,#ef476f);border:0;padding:10px 18px;border-radius:999px;color:#fff;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(239,71,111,0.18);transition:transform .12s ease, left .12s ease, top .12s ease}
    .btn:active{transform:translateY(2px) scale(.995)}

    .dodger-wrap{position:relative;width:100%;height:140px}
    .dodger{position:absolute}

    .gift{width:120px;height:120px;border-radius:12px;background:linear-gradient(180deg,#ffd7e5,#ff9ab8);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 8px 30px rgba(0,0,0,0.4);transform-origin:center;transition:transform .45s cubic-bezier(.2,.9,.3,1)}
    .gift.shake{animation:shake .9s ease-in-out}
    @keyframes shake{0%{transform:translateY(0)}25%{transform:translateY(-6px)}50%{transform:translateY(0)}75%{transform:translateY(-4px)}100%{transform:translateY(0)}}

    .rose-wrap{display:flex;align-items:center;justify-content:center;gap:28px;opacity:0;transform:scale(.98) translateY(6px);transition:all .6s cubic-bezier(.2,.9,.3,1)}
    .rose-wrap.visible{opacity:1;transform:none}
    svg{width:340px;max-width:56vw;height:auto}

    .final-msg{margin-top:12px;font-size:1.25rem;opacity:0;transform:translateY(8px) scale(.98);transition:all .6s ease}
    .final-msg.visible{opacity:1;transform:none}

    /* fire burn keyframes used when wrong answer chosen */
    @keyframes burn { from { transform: scale(1); filter: brightness(1); } to { transform: scale(1.2); filter: brightness(1.6); } }

    /* small fireworks particle style */
    .fw-particle{position:absolute;width:8px;height:8px;border-radius:50%;pointer-events:none}

    footer{margin-top:18px;font-size:.82rem;color:var(--muted)}

    @media (max-width:520px){svg{width:260px}.card{padding:18px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ƒ∞pkek - S√ºrpriz</h1>

      <div id="stage" class="stage">
        <!-- Stage content injected by JS -->
      </div>

      <footer></footer>
    </div>
  </div>

  <script>
    const stage = document.getElementById('stage');
    let step = 0;

    function clearStage(){ stage.innerHTML = ''; }

    // STAGE 1
    function renderStep1(){
      clearStage();
      const txt = document.createElement('div'); txt.innerHTML = '<strong>\"S√ºrprizi g√∂rmek istiyorsan beni takip etmelisin\"</strong>';
      const btn = document.createElement('button'); btn.className='btn'; btn.textContent='Takip Et';
      btn.onclick = ()=>{ step=1; renderStep2(); };
      stage.append(txt, btn);
    }

    // STAGE 2: Dodging button
    function renderStep2(){
      clearStage();
      const hint = document.createElement('div'); hint.textContent='\"Buraya Tƒ±kla!\" (ama dikkat ‚Äî buton ka√ßƒ±yor)';
      const wrap = document.createElement('div'); wrap.className='dodger-wrap';
      const btn = document.createElement('button'); btn.className='btn dodger'; btn.id='dodgerBtn'; btn.textContent='Buraya Tƒ±kla!';

      // ka√ßma saya√ßlarƒ±
      let hoverCount = 0;
      const maxRuns = 10;

      function moveRandom(){
        const W = Math.max(wrap.clientWidth, 120);
        const H = Math.max(wrap.clientHeight, 80);
        const paddingX = 20;
        const paddingY = 10;
        const x = Math.random() * (W - 120 - paddingX) + paddingX;
        const y = Math.random() * (H - 40 - paddingY) + paddingY;
        btn.style.left = x + 'px'; btn.style.top = y + 'px';
      }

      // mouse √ºzerindeyken ka√ßma
      btn.addEventListener('mouseenter', ()=>{
        if(hoverCount < maxRuns){
          hoverCount++;
          moveRandom();
        }
      });

      btn.addEventListener('click', ()=>{ step=2; renderStep3(); });

      wrap.appendChild(btn);
      stage.append(hint, wrap);

      // initial random position
      requestAnimationFrame(()=>{ btn.style.position='absolute'; moveRandom(); });
    }

    // STAGE 3
    function renderStep3(){
      clearStage();
      const txt = document.createElement('div'); txt.innerHTML = '<strong>Hadi ƒ∞pek, acele et ‚Äî buradayƒ±m!</strong>';
      const btn = document.createElement('button'); btn.className='btn'; btn.textContent='Tina Gel kƒ±zƒ±m!';
      btn.onclick = ()=>{ step=3; renderStep4(); };
      stage.append(txt, btn);
    }

    // STAGE 4: QUESTION
    function renderStep4(){
      clearStage();
      const txt = document.createElement('div'); txt.innerHTML = '<strong>Sana bir soru!<br>Se√ßim yapmalƒ±sƒ±n:</strong>';
      const options = ['Ata Yatƒ±rƒ±m','√úsk√ºdar Vapuru','Tina','Voleybol Topu'];
      const box = document.createElement('div'); box.style.display='flex'; box.style.flexDirection='column'; box.style.gap='10px'; box.style.marginTop='10px';

      options.forEach(opt=>{
        const b = document.createElement('button'); b.className='btn'; b.textContent=opt;
        b.onclick = ()=>{
          if(opt === 'Tina'){
            renderGift();
          } else {
            renderBurn();
          }
        };
        box.appendChild(b);
      });

      stage.append(txt, box);
    }

    function renderBurn(){
      clearStage();
      const txt = document.createElement('div'); txt.innerHTML = '<strong>Hediye paketi ALEV ALDI! üî•</strong>';
      const fire = document.createElement('div'); fire.style.fontSize = '48px'; fire.textContent = 'üî•üî•üî•'; fire.style.animation = 'burn 0.6s infinite alternate';
      const retry = document.createElement('button'); retry.className = 'btn'; retry.textContent = 'Tekrar dene'; retry.onclick = ()=>{ renderStep4(); };
      stage.append(txt, fire, retry);
    }

    // GIFT
    function renderGift(){
      clearStage();
      const txt = document.createElement('div'); txt.innerHTML = '<strong>Tebrikler! Bir hediye kutusu belirdi.</strong>';
      const boxWrap = document.createElement('div'); boxWrap.style.display='flex'; boxWrap.style.justifyContent='center'; boxWrap.style.marginTop='6px';
      const gift = document.createElement('div'); gift.className='gift'; gift.title='Kutuyu A√ß';
      gift.innerHTML = '<div style="position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;">üéÅ</div>';
      boxWrap.append(gift);

      const openBtn = document.createElement('button'); openBtn.className='btn'; openBtn.textContent='Tinanƒ±n Topu Burada!';
      openBtn.onclick = ()=>{
        gift.classList.add('shake'); openBtn.disabled = true; openBtn.textContent = 'A√ßƒ±lƒ±yor...'; setTimeout(()=>{ renderRose(); }, 900);
      };

      stage.append(txt, boxWrap, openBtn);

      const nudger = setInterval(()=>{ gift.classList.toggle('shake'); setTimeout(()=>gift.classList.remove('shake'),700); },2500);
    }

    // RENDER ROSE + FIREWORKS + FINAL
    function renderRose(){
      clearStage();

      // fireworks container
      const fireworks = document.createElement('div'); fireworks.id = 'fireworks'; fireworks.style.position = 'absolute'; fireworks.style.left = '50%'; fireworks.style.top = '40%'; fireworks.style.transform = 'translate(-50%,-50%)'; fireworks.style.width = '0'; fireworks.style.height = '0'; fireworks.style.pointerEvents = 'none';
      stage.appendChild(fireworks);

      // spawn particles
      for(let i=0;i<18;i++){
        const p = document.createElement('div'); p.className='fw-particle';
        p.style.left='0'; p.style.top='0'; p.style.background = ['#ff9aa2','#ffd1e0','#ff7aa2','#ffd47f'][i%4];
        fireworks.appendChild(p);
        (function(el){
          const ang = Math.random()*Math.PI*2;
          const dist = 80 + Math.random()*90;
          const delay = Math.random()*200;
          setTimeout(()=>{
            el.style.transition = 'all 900ms cubic-bezier(.2,.9,.3,1)';
            el.style.transform = `translate(${Math.cos(ang)*dist}px, ${Math.sin(ang)*dist}px)`;
            el.style.opacity = '1';
          }, delay);
          setTimeout(()=>{ el.style.opacity = '0'; }, delay+900);
        })(p);
      }
      setTimeout(()=>{ fireworks.remove(); }, 1600);

      // rose svg (complete)
      const roseWrap = document.createElement('div'); roseWrap.className='rose-wrap';
      roseWrap.innerHTML = `
        <svg viewBox="0 0 200 200" role="img" aria-label="S√ºrpriz g√ºl">
          <defs>
            <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#ff7aa2"/><stop offset="1" stop-color="#ef476f"/></linearGradient>
            <linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#067b50"/><stop offset="1" stop-color="#0a7f5a"/></linearGradient>
            <filter id="glow"><feGaussianBlur stdDeviation="3.8" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>

          <g id="stem" stroke="#0b6b46" stroke-width="6" stroke-linecap="round" fill="none" opacity="0">
            <path d="M100 140 C98 120 110 110 106 90" />
          </g>

          <g id="leaves" opacity="0">
            <path id="leafR" d="M108 110 C132 96 150 112 128 124 C120 110 108 110 108 110" fill="url(#g2)" opacity="0.95" />
            <path id="leafL" d="M92 118 C68 104 50 120 72 132 C80 118 92 118 92 118" fill="url(#g2)" opacity="0.95" />
          </g>

          <g id="petals" transform="translate(100,86) scale(0.86)">
            <ellipse class="petal" id="p1" rx="30" ry="22" cx="0" cy="0" fill="url(#g1)" opacity="0.98" />
            <ellipse class="petal" id="p2" rx="24" ry="18" cx="-10" cy="-6" fill="#ff93b0" opacity="0.95" />
            <ellipse class="petal" id="p3" rx="24" ry="18" cx="10" cy="-6" fill="#ff3b6b" opacity="0.95" />
            <ellipse class="petal" id="p4" rx="18" ry="14" cx="0" cy="-12" fill="#ffceda" opacity="0.98" />
            <circle class="petal" id="core" r="8" cx="0" cy="2" fill="#ff153f" />
          </g>
        </svg>
      `;

      stage.append(roseWrap);

      // animate sequentially (no broken requestAnimationFrame)
      const svg = roseWrap.querySelector('svg');
      const stem = svg.getElementById('stem'); const leaves = svg.getElementById('leaves'); const petals = svg.getElementById('petals');
      stem.style.transition = 'opacity 450ms ease'; stem.style.opacity = 1;
      setTimeout(()=>{ leaves.style.transition='opacity 550ms ease'; leaves.style.opacity=1; }, 250);

      const p1 = svg.getElementById('p1'); const p2 = svg.getElementById('p2'); const p3 = svg.getElementById('p3'); const p4 = svg.getElementById('p4'); const core = svg.getElementById('core');
      [p1,p2,p3,p4,core].forEach((el,i)=>{ el.style.transition='transform 650ms cubic-bezier(.2,.9,.3,1), opacity 450ms ease'; el.style.transform='scale(.86)'; el.style.opacity='0.9'; });

      setTimeout(()=>{ p1.style.transform='scale(1.12) translateY(-6px)'; p1.style.opacity=1; },450);
      setTimeout(()=>{ p2.style.transform='scale(1.14) translate(-6px,-6px) rotate(-6deg)'; },650);
      setTimeout(()=>{ p3.style.transform='scale(1.14) translate(6px,-6px) rotate(6deg)'; },800);
      setTimeout(()=>{ p4.style.transform='scale(1.08) translateY(-12px)'; },980);
      setTimeout(()=>{ core.style.transform='scale(1.22)'; },1150);

      setTimeout(()=>{ petals.style.transition='transform 800ms cubic-bezier(.2,.9,.3,1)'; petals.style.transform='translate(100,86) scale(1)'; roseWrap.classList.add('visible'); },1350);

      setTimeout(()=>{ showFinalMessage(); },1850);
    }

    function showFinalMessage(){
      const msg = document.createElement('div'); msg.className='final-msg'; msg.innerHTML = '<strong>ƒ∞pek‚Ä¶ <span style="color:#ffd1e0">Seni √ßok seviyorum</span> üíñ</strong>';
      stage.append(msg);
      requestAnimationFrame(()=> setTimeout(()=> msg.classList.add('visible'),60));
      burstHearts();
    }

    function burstHearts(){
      const container = document.createElement('div'); container.style.position='absolute'; container.style.left='50%'; container.style.top='50%'; container.style.transform='translate(-50%,-50%)'; container.style.pointerEvents='none'; document.body.appendChild(container);
      for(let i=0;i<12;i++){
        const h = document.createElement('div'); h.textContent='‚ù§'; h.style.position='absolute'; h.style.left='0'; h.style.top='0'; h.style.opacity='0'; h.style.transform='translate(0,0) scale(.6)'; h.style.transition='all 900ms cubic-bezier(.2,.9,.3,1)'; container.appendChild(h);
        (function(el,idx){ setTimeout(()=>{ el.style.opacity=1; const ang = (Math.random()*Math.PI*2); const dist = 60 + Math.random()*60; el.style.transform = `translate(${Math.cos(ang)*dist}px, ${Math.sin(ang)*dist}px) scale(1)`; el.style.opacity=0; }, idx*60); })(h,i);
      }
      setTimeout(()=>container.remove(),1400);
    }

    // initial render
    renderStep1();
  </script>
</body>
</html>
